[tox]
minversion = 3.0.0
skip_missing_interpreters = true
envlist =
    py37,py38
    lint
    type
    docs

[testenv]
extras = smart_open
description = run the test suite with (basepython)
deps = -rtest-requirements.txt
commands = pytest {posargs}

[testenv:lint]
description = check the code style
commands =
    black --check {toxinidir}
    flake8 {toxinidir}/sample_sheet
    pylint {toxinidir}/sample_sheet --errors-only --output-format=colorized

[testenv:type]
description = type check the library
commands = mypy --config-file {toxinidir}/tox.ini {toxinidir}/sample_sheet {posargs}

[testenv:docs]
description = test building of HTML docs
deps: -rdocs/docs-requirements.txt
commands = sphinx-build docs {toxworkdir}/docs/_build -a --color -W -bhtml {posargs}

[testenv:dev]
description = the official sample_sheet development environment
envdir = venv
usedevelop = True
commands =
    python -m pip list --format=columns
    python -c 'print("\n\nTo activate type: `source venv/bin/activate`\n\n")'
